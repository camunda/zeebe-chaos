"use strict";(self.webpackChunkzell_chaos=self.webpackChunkzell_chaos||[]).push([[9173],{14425:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var a=n(74848),s=n(28453);const i={layout:"posts",title:"Using Large Multi-Instance",date:new Date("2023-06-02T00:00:00.000Z"),categories:["chaos_experiment","bpmn"],tags:["availability"],authors:"zell"},o="Chaos Day Summary",r={permalink:"/zeebe-chaos/2023/06/02/Using-Large-Multi-Instance",editUrl:"https://github.com/zeebe-io/zeebe-chaos/blob/master/chaos-days/blog/2023-06-02-Using-Large-Multi-Instance/index.md",source:"@site/blog/2023-06-02-Using-Large-Multi-Instance/index.md",title:"Using Large Multi-Instance",description:"New day new chaos. In today's chaos day I want to pick up a topic, which had bothered people for long time. I created a chaos day three years ago around this topic as well.",date:"2023-06-02T00:00:00.000Z",tags:[{inline:!0,label:"availability",permalink:"/zeebe-chaos/tags/availability"}],readingTime:5.77,hasTruncateMarker:!0,authors:[{name:"Christopher Kujawa",title:"Chaos Engineer @ Zeebe",url:"https://github.com/zelldon",page:{permalink:"/zeebe-chaos/authors/zell"},imageURL:"https://github.com/zelldon.png",key:"zell"}],frontMatter:{layout:"posts",title:"Using Large Multi-Instance",date:"2023-06-02T00:00:00.000Z",categories:["chaos_experiment","bpmn"],tags:["availability"],authors:"zell"},unlisted:!1,prevItem:{title:"Hot backups impact on processing",permalink:"/zeebe-chaos/2023/11/07/Hot-backups-impact-on-processing"},nextItem:{title:"Continuing SST Partitioning toggle",permalink:"/zeebe-chaos/2023/05/19/Continuing-SST-Partitioning-toggle"}},c={authorsImageUrls:[void 0]},l=[];function h(e){const t={a:"a",code:"code",p:"p",strong:"strong",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["New day new chaos. ","\ud83d\udc80"," In today's chaos day I want to pick up a topic, which had bothered people for long time. I created a ",(0,a.jsx)(t.a,{href:"https://zeebe-io.github.io/zeebe-chaos/2020/07/16/big-multi-instance/",children:"chaos day three years ago"})," around this topic as well."]}),"\n",(0,a.jsxs)(t.p,{children:["Today, we experiment with large multi-instances again. In the recent patch release ",(0,a.jsx)(t.a,{href:"https://github.com/camunda/camunda/releases/tag/8.2.5",children:"8.2.5"})," we fixed an issue with spawning larger multi instances. Previously if you have created a process instance with a large multi-instance it was likely that this caused to blacklist the process instance, since the multi-instance spawning ran into ",(0,a.jsx)(t.code,{children:"maxMessageSize"})," limitations."]}),"\n",(0,a.jsx)(t.p,{children:"This means the process instance was stuck and was no longer executable. In Operate this was not shown and caused a lot of friction or confusion to users. With the recent fix, Zeebe should chunk even large collections into smaller batches to spawn/execute the multi-instance without any issues."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"TL;DR;"})," We were able to see that even large multi-instances can be executed now. ","\u2705"," At some point, we experienced performance regressions (during creating new multi-instance elements) but the execution of the process instance doesn't fail anymore. One problem at a time, we will likely investigate further to improve the performance of such a use case."]}),"\n",(0,a.jsxs)(t.p,{children:["When we reached the ",(0,a.jsx)(t.code,{children:"maxMessageSize"})," we got a rejection, if the input collection is too large we see some weird unexpected errors from NGINX."]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var a=n(96540);const s={},i=a.createContext(s);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);